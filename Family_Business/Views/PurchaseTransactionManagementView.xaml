<UserControl x:Class="Family_Business.Views.PurchaseTransactionManagementView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Height="600" Width="900">
    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*"/>
            <ColumnDefinition Width="2*"/>
        </Grid.ColumnDefinitions>

        <!-- LEFT PANEL -->
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,5">
                <Button Content="Thêm mới" Width="80" Click="BtnNew_Click"/>
                <Button Content="Sửa"     Width="80" Margin="5,0,0,0" Click="BtnEdit_Click"/>
                <Button Content="Xóa"     Width="80" Margin="5,0,0,0" Click="BtnDelete_Click"/>
                <Button Content="Tải lại" Width="80" Margin="20,0,0,0" Click="BtnReload_Click"/>
            </StackPanel>

            <DataGrid x:Name="dgTransactions"
                Grid.Row="1"
                AutoGenerateColumns="False"
                IsReadOnly="True"
                SelectionMode="Single"
                SelectionChanged="DgTransactions_SelectionChanged">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Ngày"
                              Binding="{Binding TxDate, StringFormat={}{0:dd/MM/yyyy HH:mm}}"
                              Width="130"/>
                    <DataGridTextColumn Header="Sản phẩm"
                              Binding="{Binding ProductName}"
                              Width="150"/>
                    <DataGridTextColumn Header="Đơn vị"
                              Binding="{Binding UnitName}"
                              Width="80"/>
                    <DataGridTextColumn Header="SL"
                              Binding="{Binding Quantity, StringFormat={}{0:0}}"
                              Width="80"/>
                    <DataGridTextColumn Header="Nhà cung cấp"
                              Binding="{Binding SupplierName}"
                              Width="150"/>
                    <DataGridTextColumn Header="Ghi chú"
                              Binding="{Binding Note}"
                              Width="*"/>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>

        <!-- RIGHT PANEL: mình chỉ dùng 1 Grid làm Content của GroupBox -->
        <GroupBox Header="Chi tiết Nhập hàng"
              Grid.Column="1"
              Padding="10"
              Margin="10,0,0,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <!-- 0: Ngày -->
                    <RowDefinition Height="Auto"/>
                    <!-- 1: Sản phẩm -->
                    <RowDefinition Height="Auto"/>
                    <!-- 2: Đơn vị -->
                    <RowDefinition Height="Auto"/>
                    <!-- 3: Số lượng -->
                    <RowDefinition Height="Auto"/>
                    <!-- 4: Nhà cung cấp -->
                    <RowDefinition Height="Auto"/>
                    <!-- 5: Ghi chú -->
                    <RowDefinition Height="Auto"/>
                    <!-- 6: Buttons -->
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- 0) Ngày nhập -->
                <TextBlock Text="Ngày nhập:"
                   Grid.Row="0" Grid.Column="0"
                   VerticalAlignment="Center"/>
                <DatePicker x:Name="dpTxDate"
                    Grid.Row="0" Grid.Column="1"
                    Margin="5"/>

                <!-- 1) Sản phẩm -->
                <TextBlock Text="Sản phẩm:"
                   Grid.Row="1" Grid.Column="0"
                   VerticalAlignment="Center"/>
                <ComboBox x:Name="cbProduct"
                  Grid.Row="1" Grid.Column="1"
                  Margin="5"
                  DisplayMemberPath="Name"
                  Width="160"/>

                <!-- 2) Đơn vị -->
                <TextBlock Text="Đơn vị:"
                   Grid.Row="2" Grid.Column="0"
                   VerticalAlignment="Center"/>
                <ComboBox x:Name="cbUnit"
                  Grid.Row="2" Grid.Column="1"
                  Margin="5"
                  DisplayMemberPath="UnitName"
                  Width="120"/>

                <!-- 3) Số lượng -->
                <TextBlock Text="Số lượng:"
                   Grid.Row="3" Grid.Column="0"
                   VerticalAlignment="Center"/>
                <TextBox x:Name="tbQuantity"
                 Grid.Row="3" Grid.Column="1"
                 Margin="5"
                 Width="80"/>

                <!-- 4) Nhà cung cấp -->
                <TextBlock Text="Nhà cung cấp:"
                   Grid.Row="4" Grid.Column="0"
                   VerticalAlignment="Center"/>
                <ComboBox x:Name="cbSupplier"
                  Grid.Row="4" Grid.Column="1"
                  Margin="5"
                  DisplayMemberPath="Name"
                  Width="140"/>

                <!-- 5) Ghi chú -->
                <TextBlock Text="Ghi chú:"
                   Grid.Row="5" Grid.Column="0"
                   VerticalAlignment="Top"/>
                <TextBox x:Name="tbNote"
                 Grid.Row="5" Grid.Column="1"
                 Margin="5"
                 Height="60"
                 TextWrapping="Wrap"
                 AcceptsReturn="True"/>

                <!-- 6) Buttons -->
                <StackPanel Orientation="Horizontal"
                    Grid.Row="6" Grid.ColumnSpan="2"
                    HorizontalAlignment="Right"
                    Margin="0,10,0,0">
                    <Button x:Name="btnSave"
                  Content="Lưu"
                  Width="80"
                  Click="BtnSave_Click"/>
                    <Button x:Name="btnClear"
                  Content="Xóa form"
                  Width="80"
                  Margin="5,0,0,0"
                  Click="BtnClear_Click"/>
                </StackPanel>
            </Grid>
        </GroupBox>
    </Grid>
</UserControl>
